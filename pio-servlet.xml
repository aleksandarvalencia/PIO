<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd 
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-2.5.xsd ">


    
        <mvc:annotation-driven />
        <!-- Scan the JavaConfig -->
	<context:component-scan base-package="com.projects.pio.config" />
        
        <mvc:resources location="pdfs" mapping="/pdfs/**" />
        
          <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
	<property name="defaultLocale" value="en_US"/>
       </bean>
       
       <!--ovo je setovanje za hendlovanje svih json i xml requestova!!!-->
       <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
           <property name="order" value="1"></property>
           <property name="contentNegotiationManager">
                <bean class="org.springframework.web.accept.ContentNegotiationManager">
                    <constructor-arg>
                        <bean class="org.springframework.web.accept.PathExtensionContentNegotiationStrategy">
                            <constructor-arg>
                                <map>
                                    <entry key="json" value="application/json"></entry>
                                    <entry key="xml"  value="application/xml"></entry>
                                </map>

                            </constructor-arg>
                        </bean>
                    </constructor-arg>
                </bean>
            </property>
            
            <property name="defaultViews">
                <list>
                        <bean class="org.springframework.web.servlet.view.json.MappingJackson2JsonView"/>
                        <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                            <constructor-arg>
                                <bean class="org.springframework.oxm.xstream.XStreamMarshaller">
                                    <property name="autodetectAnnotations" value="true"/>
                                </bean>
                            </constructor-arg>
                        </bean>
                        <!--
                        <bean class="com.hmkcode.view.PDFView">             
                         </bean>       
                        <bean class="com.hmkcode.view.ExcelView">             
                        </bean>-->
                </list>
            </property>
       </bean>
       
       <!--ovo je setovanje za hendlovanje svih json i xml requestova!!!-->
       
       <mvc:interceptors>
           <bean id="LocaleResolver" 
                 class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
           <property name="paramName" value="Language11"/> 
           </bean> 
       </mvc:interceptors>
       
<!--       <bean id="userValidator" class="com.projects.halkom.validation.UserFormValidator" />
       <bean id="emailValidator" class="com.projects.halkom.validation.EmailValidator" />-->

       <bean id="messageSource"
		class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
		<property name="basename" value="classpath:messages" />
		<property name="defaultEncoding" value="UTF-8" />
       </bean>

       
       
<!--        <bean id="oracleDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
            <property name="url" value="jdbc:oracle:thin:@sgs-dsdeltatest5:1521:halcom" />
            <property name="username" value="HALCOM"/>
            <property name="password" value="!!halcom!!"/>
        </bean>-->
        
        <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
            <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
            <!--<property name="url" value="jdbc:oracle:thin:@sgs-report:14400:report" />-->
            <property name="url" value="jdbc:oracle:thin:@sgs-dsdeltatest5:1521:rtrpt" />
            <property name="username" value="SGS_PIO"/>
            <property name="password" value="6ww!IL!J5~qU1234"/>
        </bean>
        
        <bean class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate" id="namedParameterJdbcTemplate">   
            <constructor-arg ref="dataSource"/>
        </bean> 

        

<!--         <bean id="OracleSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="OracleDataSource" />

            <property name="mappingDirectoryLocations">
                <list>
                    <value>/WEB-INF/hbm</value>
                </list>
            </property>
            <property name="configLocation">
               <value>/WEB-INF/hbm/hibernate1.cfg.xml</value>
           </property>
            <property name="hibernateProperties">
                <props>
                <prop key="hibernate.hbm2ddl.auto">validate</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                </props>
            </property>

        </bean>-->
        
<!--        Definition of Transaction Manager for Oracle
        <bean id="OracleTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
            <property name="sessionFactory" ref="OracleSessionFactory" />
        </bean>-->
        
<!--        
        <bean id="oracleDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
            <property name="url" value="jdbc:sqlserver://SGS-DSSQL12TEST:13300;databaseName=TradeDB" />
            <property name="username" value="BD101009"/>
            <property name="password" value="BD101009"/>            
        </bean>-->

    <!--    Hibernate SessionFactory 
        <bean id="SQLSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="sqlServerSource" />

            <property name="mappingDirectoryLocations">
                <list>
                    <value>/WEB-INF/hbm</value>
                </list>
            </property>
            <property name="configLocation">
               <value>/WEB-INF/hbm/hibernate_sql.cfg.xml</value>
           </property>
            <property name="hibernateProperties">
                <props>
                <prop key="hibernate.hbm2ddl.auto">validate</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                </props>
            </property>

        </bean>
        

        Definition of Transaction Manager for SQL Server
        <bean id="SQLTransactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
            <property name="sessionFactory" ref="SQLSessionFactory" />
        </bean>-->


    <bean id="dateEditor"
        class="org.springframework.beans.propertyeditors.CustomDateEditor">
        <constructor-arg>
            <bean class="java.text.SimpleDateFormat">
                <constructor-arg value="dd/MM/yyyy" />
            </bean>
        </constructor-arg>
        <constructor-arg value="true" />

    </bean>

   <bean class="org.springframework.beans.factory.config.CustomEditorConfigurer">
    <property name="propertyEditorRegistrars">
        <list>
            <bean class="com.projects.pio.model.CustomDateEditorRegistrar"/>
        </list>
    </property>
   </bean>

  
</beans>